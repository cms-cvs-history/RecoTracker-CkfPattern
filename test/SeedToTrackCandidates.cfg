process CkfPattern  = 
{
  ### keep the logging output to a nice level ###
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
	 
  ### initialize magnetic field ###
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  ### initialize idealGeometry ###
  es_source = XMLIdealGeometryESSource 
  { 
    # tracker geometry
    FileInPath GeometryConfiguration = "Geometry/TrackerSimData/data/trackerSimConfiguration.xml"

    # the proper root node is set in the xml file
    string rootNodeName = ""
  }

  ### tracker numbering ###
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

  ### tracker geometry ###
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

  ### TrackerRecoGeometry ###
  include "RecoTracker/TkDetLayers/data/trackerRecoGeometry.cfi"


  ### updator, measurementEstimator, propagator, etc.. es_modules ###	
  es_module = KFUpdatorESProducer
  {
    string ComponentName = "KFUpdator"   
  }

  es_module = Chi2MeasurementEstimatorESProducer
  {
    string ComponentName = "Chi2"   
    double MaxChi2 = 30. 
    double nSigma = 3.
  }

  es_module mat1 = PropagatorWithMaterialESProducer {
    string ComponentName = "PropagatorWithMaterial"
    string PropagationDirection = "alongMomentum"	
    double Mass = 0.105
  }

  es_module mat2 = PropagatorWithMaterialESProducer {
    string ComponentName = "PropagatorWithMaterialOpposite"
    string PropagationDirection = "oppositeToMomentum"	
    double Mass = 0.105
  }

  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"

#  es_module = PixelCPEParmErrorESProducer{
#    string ComponentName = "PixelCPEParmError"
#    double TanLorentzAnglePerTesla =.106
#    string PixelErrorParametrization.type = "NOTcmsim"
#  }

  source = PoolSource { 
             untracked vstring fileNames = {'file:seeds.root'}
             untracked int32 maxEvents = -1
             untracked uint32 debugVerbosity = 10
             untracked bool   debugFlag     = true
        	}

  ### KFTrackCandidateMaker module. 
  #   At the moment it uses only the CombinatorialTrajectoryBuilder ###
  include "RecoTracker/CkfPattern/data/CombinatorialTrajectoryBuilder.cfi"

  module out = PoolOutputModule {
        untracked string fileName = 'CleanToTrackCandidates.root'
  }
  path p = {trackCandidateMaker}
  endpath outpath = { out }
}
