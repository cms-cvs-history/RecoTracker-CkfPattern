process PROD  = 
{

  ################# initialize  MessageLogger ###############
  service = MessageLogger 
  {
    vstring destinations = 
    { 
      "log","cout","cerr"
    }

    PSet log = 
    { 
      string threshold = "INFO" 
    }
  
    PSet cout = 
    { 
      string threshold = "INFO" 
    }
  
    PSet cerr = 
    { 
      string threshold = "INFO" 
    }
  }


  source = PoolSource { 
             untracked vstring fileNames = {'file:seeds.root'}
             untracked int32 maxEvents = -1
             untracked uint32 debugVerbosity = 10
             untracked bool   debugFlag     = true
        	}
  #Magnetic Field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
 
  es_source = XMLIdealGeometryESSource {
	FileInPath GeometryConfiguration="Geometry/TrackerSimData/data/trackerSimConfiguration.xml"
        string rootNodeName = ""
  }

  es_module = TrackerGeometricDetESModule {}
  es_module = TrackerRecoGeometryESProducer {}
  es_module = TrackerDigiGeometryESModule {}

  es_module = KFUpdatorESProducer
  {
    string ComponentName = "KFUpdator"   
  }

  es_module = Chi2MeasurementEstimatorESProducer
  {
    string ComponentName = "Chi2"   
    double MaxChi2 = 30. 
    double nSigma = 3.
  }

  es_module mat1 = PropagatorWithMaterialESProducer {
    string ComponentName = "PropagatorWithMaterial"
    string PropagationDirection = "alongMomentum"	
    double Mass = 0.105
  }

  es_module mat2 = PropagatorWithMaterialESProducer {
    string ComponentName = "PropagatorWithMaterialOpposite"
    string PropagationDirection = "oppositeToMomentum"	
    double Mass = 0.105
  }


  es_module = KFTrajectoryFitterESProducer 
  {
    string ComponentName = "KFFitter"   
    string  Propagator = "PropagatorWithMaterial" 
    string Updator = "KFUpdator"
    string Estimator = "Chi2"
  }

  es_module = KFTrajectorySmootherESProducer 
  {
    string ComponentName = "KFSmoother"   
    string Propagator = "PropagatorWithMaterialOpposite" 
    string Updator = "KFUpdator"
    string Estimator = "Chi2"

  }

  es_module = KFFittingSmootherESProducer 
  {
    string ComponentName = "KFFittingSmoother"   
    string  Fitter = "KFFitter" 
    string Smoother = "KFSmoother"
  }


  module trackCandidateMaker = KFTrackCandidateMaker{
	int32  maxCand              = 5
        int32  maxLostHit           = 1	
	int32  maxConsecLostHit     = 1
	double lostHitPenalty       = 30.
	bool   intermediateCleaning = true
        int32  minimumNumberOfHits  = 5
	bool   alwaysUseInvalidHits = true
        bool   seedCleaning         = false
  }

  module out = PoolOutputModule {
        untracked string fileName = 'CleanToTrackCandidates.root'
  }
  path p = {trackCandidateMaker}
  endpath outpath = { out }
}
