process RoadSearch = 
{

  ################# initialize  MessageLogger ###############
  service = MessageLogger 
  {
    vstring destinations = 
    { 
      "log","cout","cerr"
    }

    PSet log = 
    { 
      string threshold = "INFO" 
    }
  
    PSet cout = 
    { 
      string threshold = "INFO" 
    }
  
    PSet cerr = 
    { 
      string threshold = "INFO" 
    }
  }
	
  

 
  ############ initialize magnetic field #########################
  es_source magfield = XMLIdealGeometryESSource 
  {
    FileInPath GeometryConfiguration = "Geometry/CMSCommonData/data/FieldConfiguration.xml"
  
    # the proper root node is set in the xml file
    string rootNodeName = ""
  }

  es_module = VolumeBasedMagneticFieldESProducer 
  {
    double findVolumeTolerance = 0.0
    untracked bool cacheLastVolume = true
    untracked bool timerOn = false
  }


  ############### initialize geometry #####################
  es_source = XMLIdealGeometryESSource 
  { 

    # tracker geometry
    FileInPath GeometryConfiguration = "Geometry/TrackerSimData/data/trackerSimConfiguration.xml"

    # full simulation geometry
    #FileInPath GeometryConfiguration = "Geometry/CMSCommonData/data/SimConfiguration.xml"

    # the proper root node is set in the xml file
    string rootNodeName = ""
  }
		
  es_module = TrackerGeometricDetESModule {}
  es_module = TrackerDigiGeometryESModule {}
  es_module = StripCPEESProducer {  
    string ComponentName = "StandardStripCPE"
    double TanLorentzAnglePerTesla = 0.106
  }



  source = PoolSource 
  { 
    untracked vstring fileNames = {'file:digis.root'}
    untracked int32 maxEvents = -1
  }

  module ThreeThresholdClusterizer =  SiStripClusterizer 
  {
    untracked int32 VerbosityLevel = 1
    string DigiProducer = "stripdigi"

    untracked string userEnv   = "me"
    untracked string passwdEnv = "me"
    bool UseNoiseBadStripFlagFromDB = false

    string ClusterMode = "ThreeThresholdClusterizer"
    double ChannelThreshold = 2.0 
    double SeedThreshold = 3.0
    double ClusterThreshold = 2.0
    int32 MaxHolesInCluster   = 1  

    double ElectronPerAdc      = 313.0 
    double EquivalentNoiseCharge300um = 2160.
    double BadStripProbability = 0.002
  }


  module LocalMeasurementConverter =  SiStripRecHitConverter
  {
    untracked int32 VerbosityLevel = 1
    string ClusterProducer = "ThreeThresholdClusterizer"
    string StripCPE = "StandardStripCPE"
  }

########################################################################
#
# Run Pixel Clusterizer and RecHit producer in chain
#

module pixClust =  SiPixelClusterProducer {
        untracked int32 ChannelThreshold = 2500
        untracked int32 SeedThreshold    = 3000
        untracked double ClusterThreshold = 5050
	untracked int32 VerbosityLevel = 1		 
    }



module pixRecHitConverter = SiPixelRecHitConverter {
           string ClusterCollLabel   = "pixClust"
           string CPE                = "FromDetPosition"
           double TanLorentzAnglePerTesla = 0.106
           int32  VerboseLevel       = 21
}
########################################################################


  module AsciiOutput = AsciiOutputModule {}

  module out = PoolOutputModule 
  {
    untracked string fileName = 'hits.root'
  }

  path p = 
  {
    pixClust,pixRecHitConverter, ThreeThresholdClusterizer,LocalMeasurementConverter
  }

  endpath e = 
  {
    AsciiOutput, out
  }
}
