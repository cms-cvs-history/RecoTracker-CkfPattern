# this cfg" will run single/multi particle pt-gun
# the pt of the particles will be uniformly
# distributed in the user-specifed pt-range 

process CkfPattern = 
{
  ################# initialize  MessageLogger ###############
  service = MessageLogger 
  {
    vstring destinations = 
    { 
      "log","cout","cerr"
    }

    PSet log = 
    { 
      string threshold = "INFO" 
    }
  
    PSet cout = 
    { 
      string threshold = "INFO" 
    }
  
    PSet cerr = 
    { 
      string threshold = "INFO" 
    }
  }
	
  

 
  ############ initialize magnetic field #########################
  es_source magfield = XMLIdealGeometryESSource 
  {
    FileInPath GeometryConfiguration = "Geometry/CMSCommonData/data/FieldConfiguration.xml"
  
    # the proper root node is set in the xml file
    string rootNodeName = ""
  }

  es_module = VolumeBasedMagneticFieldESProducer 
  {
    double findVolumeTolerance = 0.0
    untracked bool cacheLastVolume = true
    untracked bool timerOn = false
  }


  ############### initialize geometry #####################
  es_source = XMLIdealGeometryESSource 
  { 

    # tracker geometry
    FileInPath GeometryConfiguration = "Geometry/TrackerSimData/data/trackerSimConfiguration.xml"

    # full simulation geometry
    #FileInPath GeometryConfiguration = "Geometry/CMSCommonData/data/SimConfiguration.xml"

    # the proper root node is set in the xml file
    string rootNodeName = ""
  }
		
  es_module = TrackerGeometricDetESModule {}
  es_module = TrackerDigiGeometryESModule {}



  ############### initialize randomNumberService #####################
  service = RandomNumberGeneratorService
  {
    untracked uint32 sourceSeed = 98765
  }

  source = FlatRandomPtGunSource 
  { 
    untracked int32 maxEvents = 10
    PSet PGunParameters =
    {
      # you can request more than 1 particle
      #vint32  PartID = {211,11}
      #vint32 PartID = {211} 
      #vint32  PartID = {13,-13}
      vint32  PartID = {13}
      double MinEta =  -2.3
      double MaxEta =  2.3
      double MinPhi = -0.001
      double MaxPhi =  0.001
      double MinPt  =  9.99
      double MaxPt  = 10.01
    }
  }
    

  ###############  simulation module #####################
  # include geant4 simulation
  include "RecoTracker/RoadSearchCloudMaker/test/SimG4Object.cfg"

  module Out = PoolOutputModule
  { 
    untracked string fileName = "simHit.root"
  }

  path p = 
  {
    SimG4Object
  }

  endpath e = 
  {
    Out
  }
}
