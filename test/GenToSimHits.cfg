# this cfg" will run single/multi particle pt-gun
# the pt of the particles will be uniformly
# distributed in the user-specifed pt-range 

process Simulation = 
{
  ### keep the logging output to a nice level ###
  include "FWCore/MessageService/data/MessageLogger.cfi"
 
  ### initialize magnetic field ###
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  ### initialize geometry ###
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"


  ### tracker numbering ###
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

  ### tracker geometry ###
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"


  ### initialize randomNumberService ###
  service = RandomNumberGeneratorService
  {
     untracked uint32 sourceSeed = 98765
     PSet moduleSeeds =
     {
        untracked uint32 VtxSmeared = 12345
     }
  }


  source = FlatRandomPtGunSource 
  { 
    untracked int32 maxEvents = 50
    untracked PSet PGunParameters =
    {
      # you can request more than 1 particle
      #vint32  PartID = {211,11}
      #vint32 PartID = {211} 
      #vint32  PartID = {13,-13}
      untracked vint32  PartID = {13}
      untracked double MinEta =  -2.3
      untracked double MaxEta =  2.3
      untracked double MinPhi = -3.14159265358979323846 # in radians
      untracked double MaxPhi =  3.14159265358979323846
      untracked double MinPt  =  9.99
      untracked double MaxPt  = 10.01
    }
  }
    
  ###  vertex smearing module ###
  module VtxSmeared = VertexGenerator
  {
     string type = "IOMC/EventVertexGenerators/GaussianEventVertexGenerator"    
     double MeanX = 0.
     double MeanY = 0.
     double MeanZ = 0.
     double SigmaX = 0.015
     double SigmaY = 0.015
     double SigmaZ = 53.0  // in mm (as in COBRA/OSCAR)
  }

  ###  simulation module ###
  include "SimG4Core/Application/data/SimG4Object.cfi"


  module Out = PoolOutputModule
  { 
    untracked string fileName = "simHit.root"
  }

  path p = 
  {
    VtxSmeared,SimG4Object
  }

  endpath e = 
  {
    Out
  }
}
